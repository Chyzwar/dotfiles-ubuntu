#!/bin/bash

BIN_NAME=$(basename $0)
COMMAND_NAME=$1


sub_help () {
    echo "Usage: $BIN_NAME <command>\n"
    echo "Commands:"
    echo "   help               This help message"
    echo "   system             Install basic setup for Ubuntu"
    echo "   pro                Install diffrent programmuing env"
    echo "   shell              Install, source and link dotfiles to bash and zhs"
    echo "   reload             Reload dotfiles"
    echo "   sublime            Install  Sublime Text 3 and custom plugins"
    echo "   atom               Install  Atom text editor"
    echo "   emacs              Install  Emacs and spacemac "
    echo "   vim                Install  Vim and custom plugins using Vundle"
    echo "   vscode             Install  VSCode"
    echo "   vimpager           Install  Vimpager"
    echo "   all                Install  using all options"
}

sub_reload () {
    source ~/.bash_profile && echo "Bash reloaded."
}

sub_system () {
    sudo chmod +x setup/system-install.bash
    bash setup/system-install.bash
}

sub_pro () {
    sudo chmod +x setup/pro-install.bash
    bash setup/pro-install.bash
}

sub_shell () {
    sudo chmod +x setup/shell-install.bash
    bash setup/shell-install.bash
}

sub_sublime () {
    sudo chmod +x sublime/sublime-install.bash
    bash sublime/sublime-install.bash
}

sub_atom () {
    sudo chmod +x setup/atom-install.bash
    bash setup/atom-install.bash
}

sub_vim () {
    sudo chmod +x vim/vim-install.bash
    bash vim/vim-install.bash
}
sub_emacs () {
    sudo chmod +x setup/emacs-install.bash
    bash setup/emacs-install.bash
}

sub_vscode () {
    sudo chmod +x setup/vscode-install.bash
    bash setup/vscode-install.bash
}

sub_vimpager () {
    sudo chmod +x vim/vimpager-install.bash
    bash vim/vimpager-install.bash
}

sub_all () {
    sub_shell
    sub_system
    sub_pro
    sub_sublime
    sub_atom
    sub_vim
    sub_emacs
    sub_vscode
    sub_vimpager
}


case $COMMAND_NAME in
    "" | "-h" | "--help")
        sub_help
        ;;
    *)
        shift
        sub_${COMMAND_NAME} $@
        if [ $? = 127 ]; then
            echo "'$COMMAND_NAME' is not a known command or has errors." >&2
            sub_help
            exit 1
        fi
        ;;
esac
